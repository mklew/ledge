<?xml version="1.0"?>
<container>
  <container key="org.picocontainer.MutablePicoContainer" replace="true">
    <adapter-factory class="org.picocontainer.defaults.CachingComponentAdapterFactory">
	  <adapter-factory class="org.objectledge.pico.customization.CustomizingConstructorComponentAdapterFactory"/>
    </adapter-factory>
    
    <component key="org.objectledge.filesystem.FileSystemProvider:local" 
               class="org.objectledge.filesystem.LocalFileSystemProvider">
      <constant-parameter value="local"/>
      <component-parameter key="org.objectledge.filesystem.FileSystem:root"/>
    </component>
    <component key="org.objectledge.filesystem.FileSystemProvider:classpath" 
               class="org.objectledge.filesystem.impl.ClasspathFileSystemProvider">
      <constant-parameter value="classpath"/>
      <component-parameter class-key="java.lang.ClassLoader"/>
    </component>
    <component class="org.objectledge.filesystem.FileSystem">
      <sequence-parameter class="[Lorg.objectledge.filesystem.FileSystemProvider;">
        <component-parameter key="org.objectledge.filesystem.FileSystemProvider:local"/>
        <component-parameter key="org.objectledge.filesystem.FileSystemProvider:classpath"/>
      </sequence-parameter>
      <constant-parameter class="java.lang.Integer" value="4096"/>
      <constant-parameter class="java.lang.Integer" value="4096"/>
    </component>
    
    <component class="org.objectledge.xml.XMLValidator"/>
    <component class="org.objectledge.configuration.ConfigurationFactory" preload="true">
      <component-parameter class-key="org.picocontainer.MutablePicoContainer"/>
      <component-parameter class-key="org.objectledge.filesystem.FileSystem"/>
      <component-parameter class-key="org.objectledge.xml.XMLValidator"/>
      <constant-parameter value="/config"/>
    </component>

    <component class="org.objectledge.logging.LoggingConfigurator" preload="true"/>
    <component class="org.objectledge.logging.LoggerFactory" preload="true"/>

	<!-- end of core config -->

    <component class="org.objectledge.test.FooComponent"/>
    
  </container>
</container>